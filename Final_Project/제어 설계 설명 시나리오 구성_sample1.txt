
1.4.2 함수 제어문 (조건)
 motor_init()
        while True:
            recv_message = conn.recv(20).decode()
            if recv_message == "y":
                break
        
        for i in range(plen):
            motor_forward()
            if Sonar() < 30:
                motor_stop()
                start(i)
 
        while True:
            recv_message = conn.recv(20).decode()    
            if recv_message == 'y':
                break

소나 센서 30 기준으로 하여서 물체가 소나에 닿으면 멈추고 안닿으면 계속 모터가 돌아갑니다.
지금 제어문에서는 소나에 닿고 몇초있다가 다시 시작하게 만들었고 추후 수정을 통해 카메라 센서에 카메라가 찍어서 openCV 와 start 함수 에 거리 구하는 공식을 통해 데이터값이 나오면 다시 시작 할수 있도록 수정할 예정입니다. <10/12 일 작성>
 


1.4 기능별 함수 설계
1.4.1 함수 목록
함수 명
함수 역할
관계된 함수
led_on()
LED 켜기
led_init


led_off()
LED 끄기
led_init


led_blink()


LED 한쪽켜지면 다른 LED 는 꺼지기 
led_init,led_on,
led_off
led_all_blink()


led1,led2 켜기 , led1,led2 끄기
불량품,양품 확인을 위한 제어문입니다.
led_init,led_on,
led_off
led_shift()
#led1 켜고 led 2 끄기, led2 켜고 , led1 끄기
불량품 ,양품 확인을 위한 제어문입니다.
led_init,led_on,
led_off
motor_forward()


모터 앞으로앞으로작동
 하는일은 컨베이어 벨트 작동하는 함수입니다.
motor_init()


motor_backward()
모터 뒤로 작동
컨베이어 벨트 제어를 뒤로 제어하는 함수입니다.
motor_init()
motor_stop()
모터 멈춤 
컨베이어 멈추기 위한 함수입니다.
motor_init()
Sonar()


초음파 센서이며 
물체가 있는지 없는지 확인하기 위한 센서입니다. 초음파 센서 로 통한 컨베이어 벨트 멈춤 시작을 정의합니다.


servo_motor(angle)
서보 모터 제어하는 함수입니다.
불량품 양품 을 나누기 위해 서보모터에 막대기를 달아 제어하기 위한 함수입니다. 
각도 제어 가능합니다. 



기능에 대한 처리 절차
실행단계: 1.컨베이어 벨트 작동(motor forward함수 작동) -> 초음파 센서 (Sonar 함수 실행)->컨베이어 벨트가 멈춤(motor stop) -> 카메라 센서 작동(openCV 함수)->사진 촬영(openCV실행)-> start함수 실행-> 결과값 db저장-> 컨베이어벨트 재작동->불량품,양품 판별시 led 함수 작동(led 1= green),(led 2 = red) ->샘플2.컨베이어벨트(motor forward함수 동일합니다.)진입 작동(이부분은 컨베이어벨트는 1,2 는 같이 돌아갑니다.멈추면 같이 멈춥니다.)->2.초음파 센서 진입시->
doc motor(실행) 행동: 분류대 가 작동하여 불량이면 쓰레기통으로 밀쳐줍니다. 이후 다시 제자리로 복귀 됩니다.-> 양품시 그냥 servo_ motor 작동안하고 진행합니다.






